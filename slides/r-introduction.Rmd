---
title: "Introduction to R"
subtitle: "What is R and Why Should You Use It?"
author: "Maj Jason Freels"
date: "Air Force Institute of Technology"
output: 
  slidy_presentation:
    smart: false
    fig_caption: yes
footer: "Introduction to R: What is R and Why Should You Use It?"
graphics: yes
---

# OVERVIEW

```{r, echo=FALSE}
library(jkf)
source(jkf::SCRIPT('setup.R'), local = T)
shiny::includeCSS(jkf::SCRIPT('flat-slidy.css'))
shiny::includeCSS(jkf::SCRIPT('r-title.css'))
shiny::includeScript(jkf::SCRIPT("jquery.min.js"))
shiny::includeScript(jkf::SCRIPT("jkf-scroll.js"))
``` 

## In This Presentation...

- Introduce the <img src="`r jkf::IMG('Rlogo.png')`" style="height: 30px; vertical-align: -10%;"> programming language and the <img src="`r jkf::IMG('RStudio.png')`" style="height: 30px; vertical-align: -10%;"> IDE

- Discuss some advantages and disadvantages of R

- Outline the basic structure of R

- Show how to interact with the R environment

- Detail several help resources

# BACKGROUND

## What is R?

- A statistical programming environment comprised of:  

    - A suite of operators for calculations on vectors and matrices

    - A collection of tools and graphical facilities for data analysis and reproducible research

    - Conditional expressions, loops, user-defined recursive functions, and input-output facilities

## Background - Where Did R Come From?

- R was developed at the University of Auckland by <u><font color="blue">__R__</font></u>oss Ihaka and <u><font color="blue">__R__</font></u>obert Gentleman (1992-1996)

```{r, echo=FALSE, out.width='100%'}
library(leaflet)

m <- leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="<center><font size='2em'>The University of Auckland<br/>The birthplace of R</font></center>")
m  # Print the map
```

- Gentleman & Ihaka created R as a dialect of the language 'S', developed in the John Chambers et. al. at Bell Labs (1976)

    - Added lexical scoping semantics (vice dynamic scoping)

    - The name 'R' was chosen partly as a play on the name 'S'

## What is S?
    
- Initial version (S1) was implemented as a collection of wrapper functions to interface with FORTRAN libraries

- Later versions (S3) were re-written in C and included statistical analysis capabilities
    
- A lot of S code (version 3 and later) will run in R with little to no changes

- It's important to understand the motivation behind how S was designed [Chambers](http://ect.bell-labs.com/sl/S/history.html) notes: 

> “[W]e wanted users to be able to begin in an interactive environment, where they did not consciously think of themselves as programming. Then as their needs became clearer and their sophistication increased, they should be able to slide gradually into programming, when the language and system aspects would become more important.”

- This motivation has been carried through into R






- One of the fastest growing technical programming languages in the world

## IEEE Ranking Of Top Programming Languages - 2015 (click the image)

<center>[<img src="`r jkf::IMG('languages.png')`" width="60%">](http://spectrum.ieee.org/static/interactive-the-top-programming-languages-2015)</center>

## Where Did R Come From?


    + Since 1997: international R-core team (~15 people) and thousands of code writers and statisticians share their work via R packages

# WHY SHOULD I USE R? - HUMAN EFFICIENCY

## Human efficiency vs. Machine efficiency

- Most programming languages are designed for <focus>Machine efficiency</focus> 

    + Machine efficiency is concerned with producing numerical results as fast as possible
    
    + Pre-compiled languages (C, C++, FORTRAN) can produce numerical results extremely fast

    + However, pre-compiled code can be difficult to read for non-developers
    
    + Compiled languages were developed to make it easier to collaborate
    
    + Several compiled languages are proprietary - making it hard to connect with outside resources

- R was built for <focus>human efficiency</focus> 

    + Human efficiency is concerned with how fast a language can produce a final product

    + As a compiled, interpreted language R may not compute as fast as pre-compiled languages

    + R might cost you <focus>minutes</focus> to compute a specific result, but...

    + R can save you <focus>days</focus> in getting your results compiled into a paper or presentation

    + Plus, R makes it easy to speed up your analysis by pulling in code from many other languages

## Example of Human Efficiency with R 

## Fuel Efficiency Example

- Suppose we're interested in estimating which automobile design factors have a statistically significant effect on fuel efficiency

    + This type of analysis is often done using a technique called <u>__statistical linear regression__</u>
    
    + Right now, the how's and why's of linear regression aren't important

    + The focus of this example is how quickly R allows the user to go from a data set to a polished document showing the results of an analysis

- This example uses the <u>__Motor Trend Car Road Tests__</u> data set that installs with R - to view this data set type `mtcars`

    + Many R packages come with data sets pre-loaded, to view the names of the data sets type `data(package = "datasets")`

    + A new RStudio tab should open showing the names of the data sets in the datasets package

    + To read the documentation on a data set, type `?mtcars` or `help(mtcars)` 

## Think About what you want...

- You may need to present your results to someone...what might they want to see?

    + The data set itself

    + Plots to illustrate and support your conclusions

    + A table of results from your analysis 

- R/RStudio simplifies the process by bringing everything together 

    + Data

    + Analysis (code, plots & results)

    + Presentation & Visualization 

## Data Set in Interactive Table

```{r, eval=FALSE}
shinyApp(options = list(width = '100%', height = '650px'),
  ui = fluidPage('', theme = shinytheme('flatly'),
       mainPanel(DT::dataTableOutput('mtcars'), width = 12)),
  server = function(input, output, session) {
output$mtcars <- DT::renderDataTable(mtcars, options = list(pageLength = 12))
})
```

## Plots to Support Conclusions (with code for better reproducibility)

```{r, out.width='100%'}
teachingApps:::includeApp('maximum_likelihood', height = '800px')
```

## Table of results from your analysis

```{r, echo=FALSE, results='hide'}
SMRD::xarray(summary(lm(mtcars))$coef)
```

<font size="5">
$$
`r SMRD::xarray(summary(lm(mtcars))$coef)`
$$
</font>

# ADVANTAGES AND DISADVANATAGES OF USING R

## Advantages

- Only open-source language with a standardized set of development tools to extend the environment

- Gives full access to the programming environment, easily see what functions are doing, fix bugs, and extend software

- Promotes reproducible research by providing open and accessible tools for data analysis and reporting

- Provides a forum allowing researchers to explore and expand the methods used to analyze data

- Scientists around the world are the co-owners to the software tools needed to carry out research

- Over 7,000 R packages available (as of: 8/2015)

- The product of thousands of experts in many fields - **R is CUTTING EDGE**

## Disadvantages

- Many percieve the R learning curve to be steep, minimal GUI<br><font color="red">__Addressed by RStudio__</font>

    + In reality, R's learning curve is no steeper than that of any other language

    + The real issue relates to R how is structured compared to other languages

    + This is explained in more detail below
    
- Little commercial support; new users complain of hostility on R help sites

- Figuring out correct methods to use a function on your own can be frustrating

- Working with large datasets is limited by RAM<br><red>__Addressed by datatable package__</red>

- Data prep can be messier and more mistake prone in R vs. SPSS or SAS<br><red>__Addressed by dplyr and tidyr pacakges__</red>

## How R is different

- In MatLab & JMP (for example) updates are released every 6-12 months

    + In preparing these updates, effort is made to ensure that the user experience is consistent across every function

    + This means that there is essentially a single learning curve to becoming proficient at using MatLab or JMP

    + A potential drawback of this development model is that users may not have access to newer methods until the the next update is released 

- R is more like the wild west - updates and new capabilities are released every day

    + <u>Some</u> effort is made by the core R team to ensure a consistent user experience

    + But, R is purposefully focused on letting researchers from around the world share their work with the world quickly

    + A potential drawback of this development model is that it's __NOT__ uncommon for multiple packages to have functions with the exact same name that produce completely different results

    + Thus, R does not have a steeper learning curve, but CAN, in some cases, have multiple learning curves for different packages 

# UNDERSTANDING THE R ENVIRONMENT

## Basic Structure of R

- R was initially a functional programming language which has taken on attributes of an object-oriented programming during its development

- To understand computations in R, remember these five things

    + 1) Everything that exists is an <red>object</red>...almost

    + 2) Everything that happens is a <orange>function call</orange>

    + 3) Function call means that a function-class object "calls" a particular <green>method</green>

    + 4) Every object and function call has an associated <blue>environment</blue>

    + 5) <purple>Lexical scoping rules</purple> define how objects and functions can interact

## Analogy for Understanding R's Basic Structure

- In cooking, simple methods are applied to combine ingredients into finished products 

- At the most basic level these methods are:

    + Heating stuff up

    + Cooling stuff down

    + Breaking stuff apart

    + Mixing stuff together

- Specialized tools can adjust how a method is applied to certain "classes" of ingredients 

    + Double boiler pan

    + Waffle maker

    + Microwave

    + Bread maker

- The process of scripting with R is similar to cooking

- At the most basic level some of the methods used in R scripting are:

    + `plot` - basic method for plotting simple numeric objects

    + `print` - basic method for printing simple numeric objects

    + `summary` - basic method for summarizing simple numeric objects

    + There are several others

- Specialized tools (functions) adjust how a method is applied to certain "classes" of objects 

    + `plot.function( )` - applies the plot method to function objects

    + `plot.stepfun( )` - applies the plot method to step-function objects

    + `plot.ts( )` - applies the plot method to time-series objects
    
    + <focus>You don't have to remember all the specialty functions - R picks the right one for you</focus> 

## Let's Examine What Happens When The Following Code Is Run

```{r, echo=TRUE, results='hide'}
my.table <- xtable::xtable(mtcars)
print(my.table)
```

- <u>__Line 1__</u> - `xtable( )` first checks `class(mtcars)` = `r class(mtcars)` 

    + The `xtable( )` then searches for a method to convert a `r class(mtcars)`-class object to an `xtable`-class object

    + In this case, the function used is `xtable.data.frame( )`  

    + R then stores the converted object under the name `my.table`

- <u>__Line 2__</u> - `print( )` then checks `class(my.table)` = `r class(my.table)`

    + `print` then searches for a method to print an `xtable`-class object 

    + In this case, the function used is `print.xtable( )`

## R Packages

- Many R Packages create new, complex objects with new classes

    + The __Survival__ package creates `Surv`-class objects

    + The __xtable__ package creates `xtable`-class objects

    + The __SMRD__ pacakge creats `life.data`-class objects

- Along with the new classes of objects, packages also define new methods for manipulating these objects

- <focus>THIS ABILITY TO CREATE NEW CLASSES OF OBJECTS IS THE POWER OF R</focus>

- Downloading packages expands our "kitchen", providing more sophisticated tools for creating and manipulating complex objects, SO...

<div class="columns-2">
...we go from this...

<img src="`r jkf::IMG('simple-kitchen.jpg')`" style = "width: 100%; height: 100%"/>

...to this... 

<img src="`r jkf::IMG('enormous-kitchen2.jpg')`" style = "width: 100%; height: 100%"/>
</div>

# INTERACTING WITH THE R ENVIRONMENT

## Everything in R is an OBJECT...Almost

- Functions, vectors, datasets, character strings... are stored as objects

- Graphics are written out and are NOT stored as objects

- Objects are classified by two criteria:

    + MODE: how objects are stored in R - character, numeric, logical, factor, list, & function 

    + CLASS: how objects are treated by functions - vector,list, matrix, array, data frame & hundreds of other classes created by specific functions

- Scripting is the process of matching objects and function calls such that the desired output objects (e.g., statistical results) and graphics are returned. 

## The Process of R Scripting - Step 1

<center><img src="`r jkf::IMG('R-Pic-1.png')`" style = "width: 80%;"/></center>

<br>

<center><img src="`r jkf::IMG('R-Pic-2.png')`" style = "width: 80%;"/></center>

<br>

<center><img src="`r jkf::IMG('R-Pic-3.png')`" style = "width: 80%;"/></center>

## Assigning names to objects - R is CasE sENsItiVE!!

- R has three methods to assign names to objects

    + Left assignment

    + Right assigment

    + Equals sign

- R treats each of these methods the same (in most cases)

- Object naming rules 

    + Variable names can only contain letters and numbers separated by "." or "_"

    + Variable Names <u>CANNOT</u> begin with a number

```{r,echo=TRUE,results='hide'} 
var <- 5  ## Left assignment
```

```{r,echo=TRUE,results='hide'} 
200 -> Var ## Right assignment
```

```{r,echo=TRUE,results='hide'} 
meaning.of_life = 42 ## Or equal sign
```

```{r,echo=TRUE} 
var; Var; meaning.of_life
```

# HELPFUL FUNCTIONS

## Functions to access R object properties

- R scripting errors result when an object's properties don't match what was expected by the function call

- These functions are helpful to find what properties are assigned to an object

```{r,echo=TRUE,eval=FALSE}
mode(object.name)  ## Returns an object's mode 
```

```{r,echo=TRUE,eval=FALSE}
class(object.name) ## Returns an object's class
```

```{r,echo=TRUE,eval=FALSE}
attributes(object.name) ## Returns the attributes associated with an object
```

```{r,echo=TRUE,eval=FALSE}
str(object.name) ## Returns the complete list of properties assigned to an object
```

<center><u><font color="red">**str( ) is every R users best friend**</font></u></center>

## Functions to manage active objects

- Sometimes errors result if you accidentally overwrite an object in the current environment 

- These functions are helpful for managing objects defined in the current working environment 

```{r,echo=TRUE,eval=FALSE}
ls( ) ## Returns a list of active objects in the current working environment
```

```{r,echo=TRUE,eval=FALSE}
rm( ) ## Removes an object from the current working environment
```

```{r,echo=TRUE,eval=FALSE}
rm(list = ls()) ## Removes all objects from the current working environment (use carefully)
```

## Functions to manage your local file structure 

- Errors can result if a script, saved in one file location, calls a file in another location

- These functions are helpful for managing your local file structure

- Additionally, creating projects in RStudio can help avoid these errors

```{r,echo=TRUE,eval=FALSE}
getwd( ) ## Returns the location of the current working directory
```

```{r,echo=TRUE,eval=FALSE}
setwd("C:/Users/Desktop") ## Reassigns the location of the working directory
```

```{r,echo=TRUE,eval=FALSE}
file.choose( ) ## Opens a new file explorer window to choose a file
```

## Help Resources Within R

```{r,echo=TRUE,eval=FALSE} 
?cos ## Searches the local package library for "cos"
```

```{r,echo=TRUE,eval=FALSE} 
??xyz ## Searches the full R documentation for "xyz" - also help(xyz)
```

```{r,echo=TRUE,eval=FALSE} 
vignette() ## Lists "how-to" demos available for each package in the library
```

```{r,echo=TRUE,eval=FALSE} 
help.search("t.test") ## Provides a categorized search of R documentation for "t.test"
```

## Online Resources for Help

- Quick R <b><http://www.statmethods.net/></b>

    - Expands upon book: <u>*R in Action*</u> 2nd ed., Robert I. Kabacoff August, 2011, Mannings Publication Company, ISBN 9781935182399

- R-bloggers <b><http://www.r-bloggers.com/></b>

    - An aggregation of content collected from bloggers who write about R to help R users connect and follow the "R blogosphere" 

- StackOverflow <b><http://stackoverflow.com/questions/tagged/r/></b>

    - A question and answer site for professional and enthusiast programmers

# NOW YOU KNOW ENOUGH TO BE DANGEROUS

<br>

<center><img src="`r jkf::IMG('gymnastics-fail.gif')`" style = 'width: 40%'/></center>

- Next, go beyond the basics and use R and RStudio to create and manipulate objects

- Check out these presentations

    + [__R: Environments and Objects__](https://afit.shinyapps.io/R-Objects/R-Objects.Rmd)

    + [__R: Plotting__](https://afit.shinyapps.io/R-Plotting/R-Plotting.Rmd)
    
    + [__R: Special Functions__](https://afit.shinyapps.io/R-Special/R-Special.Rmd)
